# DPA V3è®¤çŸ¥ç³»ç»Ÿå‰ç«¯é›†æˆæŒ‡å—

## æ¦‚è¿°

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•åœ¨å‰ç«¯ä½¿ç”¨V3è®¤çŸ¥ç³»ç»Ÿçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬è®¤çŸ¥å¯¹è¯ã€ç³»ç»ŸçŠ¶æ€ç›‘æ§å’Œè®°å¿†åº“æŸ¥è¯¢ç­‰ã€‚

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# ç¡®ä¿åç«¯APIè¿è¡Œåœ¨8001ç«¯å£
cd /Users/mdwong001/Desktop/code/rag/DPA
conda activate dpa_gen
uvicorn src.api.main:app --host 0.0.0.0 --port 8001 --reload

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆ8031ç«¯å£ï¼‰
cd frontend
npm install
npm run dev
```

### 2. è®¿é—®è®¤çŸ¥å¯¹è¯é¡µé¢

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:8031
2. åœ¨ä¾§è¾¹æ ç‚¹å‡»"è®¤çŸ¥å¯¹è¯"
3. é€‰æ‹©ä¸€ä¸ªé¡¹ç›®å¼€å§‹å¯¹è¯

## è®¤çŸ¥å¯¹è¯åŠŸèƒ½

### ä¸»è¦ç‰¹æ€§

1. **æ™ºèƒ½å¯¹è¯**
   - åŸºäºå››å±‚è®°å¿†æ¨¡å‹çš„æ·±åº¦ç†è§£
   - ä¸‰é˜¶æ®µæ··åˆæ£€ç´¢ï¼ˆå‘é‡+å›¾è°±+è®°å¿†åº“ï¼‰
   - å…ƒè®¤çŸ¥å¼•æ“è‡ªåŠ¨é€‰æ‹©æœ€ä½³ç­–ç•¥

2. **è®¤çŸ¥ç­–ç•¥**
   - ğŸ”† æ¢ç´¢(Exploration): å‘ç°æ–°çŸ¥è¯†å’Œæ¨¡å¼
   - ğŸ’¾ åˆ©ç”¨(Exploitation): ä½¿ç”¨å·²æœ‰çŸ¥è¯†å›ç­”
   - âœ“ éªŒè¯(Verification): ç¡®è®¤å’ŒéªŒè¯ä¿¡æ¯
   - ğŸ§  åæ€(Reflection): æ·±åº¦æ€è€ƒå’Œæ€»ç»“
   - ğŸ”— é€‚åº”(Adaptation): è°ƒæ•´ç­–ç•¥å’Œæ–¹æ³•

3. **å®æ—¶çŠ¶æ€ç›‘æ§**
   - ç³»ç»Ÿå¥åº·çŠ¶æ€
   - ç»„ä»¶åœ¨çº¿çŠ¶æ€
   - å¤„ç†æ—¶é—´ç»Ÿè®¡
   - ç½®ä¿¡åº¦è¯„ä¼°

### ä½¿ç”¨ç¤ºä¾‹

```javascript
// å‘é€è®¤çŸ¥å¯¹è¯è¯·æ±‚
const response = await cognitiveService.chat({
  message: "è¯·åˆ†æè¿™ä¸ªæŠ€æœ¯æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹",
  project_id: "proj_123",
  use_memory: true,
  max_results: 10
});

// å“åº”åŒ…å«
{
  conversation_id: "conv_abc123",
  response: "åŸºäºæ·±åº¦åˆ†æ...",
  strategy_used: "reflection",
  confidence_score: 0.85,
  sources: [...],
  metacognitive_state: {...},
  processing_time: 3.2
}
```

## APIæ¥å£è¯´æ˜

### 1. è®¤çŸ¥å¯¹è¯

```typescript
POST /api/v1/cognitive/chat
{
  "request": {
    "message": "ä½ çš„é—®é¢˜",
    "project_id": "é¡¹ç›®ID",
    "conversation_id": "ä¼šè¯IDï¼ˆå¯é€‰ï¼‰",
    "use_memory": true,
    "strategy": "exploration",  // å¯é€‰ï¼ŒæŒ‡å®šç­–ç•¥
    "max_results": 10
  }
}
```

### 2. ç³»ç»Ÿå¥åº·æ£€æŸ¥

```typescript
GET /api/v1/cognitive/health

// è¿”å›
{
  "status": "healthy",
  "components": {
    "storage": "online",
    "memory_bank": "online",
    "workflow": "online",
    "s2_chunker": "online",
    "retrieval_system": "online",
    "metacognitive_engine": "online"
  }
}
```

### 3. è®¤çŸ¥åˆ†æ

```typescript
POST /api/v1/cognitive/analyze
{
  "request": {
    "document_text": "æ–‡æ¡£å†…å®¹",
    "project_id": "é¡¹ç›®ID",
    "analysis_type": "deep",
    "analysis_goal": "æå–å…³é”®æŠ€æœ¯ç‚¹",
    "enable_metacognition": true
  }
}
```

### 4. è®°å¿†åº“æŸ¥è¯¢

```typescript
POST /api/v1/cognitive/memory/query
{
  "request": {
    "query": "æŸ¥è¯¢å†…å®¹",
    "project_id": "é¡¹ç›®ID",
    "memory_types": ["concepts", "insights", "hypotheses"],
    "limit": 20
  }
}
```

## å‰ç«¯ç»„ä»¶è¯´æ˜

### CognitivePageç»„ä»¶

ä¸»è¦è®¤çŸ¥å¯¹è¯é¡µé¢ï¼ŒåŒ…å«ï¼š
- å·¦ä¾§ï¼šç³»ç»ŸçŠ¶æ€é¢æ¿å’Œç­–ç•¥è¯´æ˜
- å³ä¾§ï¼šå¯¹è¯åŒºåŸŸ
- åº•éƒ¨ï¼šè¾“å…¥æ¡†

### å…³é”®çŠ¶æ€ç®¡ç†

```typescript
// æ¶ˆæ¯çŠ¶æ€
const [messages, setMessages] = useState<CognitiveMessage[]>([])

// ä¼šè¯ID
const [conversationId, setConversationId] = useState<string | null>(null)

// ä½¿ç”¨React Queryç®¡ç†APIè°ƒç”¨
const chatMutation = useMutation({
  mutationFn: cognitiveService.chat,
  // ...
})
```

## æµ‹è¯•æ–¹æ³•

### æ‰‹åŠ¨æµ‹è¯•

1. è®¿é—®è®¤çŸ¥å¯¹è¯é¡µé¢
2. è¾“å…¥æµ‹è¯•é—®é¢˜ï¼š
   - "ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹è®¤çŸ¥ç³»ç»Ÿ"
   - "å¸®æˆ‘åˆ†æè¿™ä¸ªé¡¹ç›®çš„æŠ€æœ¯æ¶æ„"
   - "æ€»ç»“ä¸€ä¸‹æœ€è¿‘çš„ç ”ç©¶è¿›å±•"
3. è§‚å¯Ÿå“åº”å†…å®¹ã€ç­–ç•¥é€‰æ‹©å’Œç½®ä¿¡åº¦

### è‡ªåŠ¨åŒ–æµ‹è¯•

```bash
# è¿è¡Œå‰ç«¯E2Eæµ‹è¯•
cd frontend
node test_cognitive_frontend.js
```

## å¸¸è§é—®é¢˜

### 1. è®¤çŸ¥å¯¹è¯æ— å“åº”

- æ£€æŸ¥åç«¯APIæ˜¯å¦è¿è¡Œï¼ˆç«¯å£8001ï¼‰
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
- ç¡®è®¤å·²é€‰æ‹©é¡¹ç›®

### 2. ç³»ç»ŸçŠ¶æ€æ˜¾ç¤ºç¦»çº¿

- æ£€æŸ¥æ•°æ®åº“è¿æ¥ï¼ˆPostgreSQL, Neo4j, Qdrant, Redisï¼‰
- æŸ¥çœ‹åç«¯æ—¥å¿— `tail -f api_server.log`

### 3. å“åº”é€Ÿåº¦æ…¢

- é¦–æ¬¡è¯·æ±‚éœ€è¦åˆå§‹åŒ–ç»„ä»¶ï¼ˆçº¦5-10ç§’ï¼‰
- å¤æ‚æŸ¥è¯¢å¯èƒ½éœ€è¦æ›´é•¿æ—¶é—´
- æ£€æŸ¥ç½‘ç»œè¿æ¥

## æœ€ä½³å®è·µ

1. **é—®é¢˜è¡¨è¿°**
   - æ¸…æ™°å…·ä½“çš„é—®é¢˜è·å¾—æ›´å¥½çš„å›ç­”
   - æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯æœ‰åŠ©äºç†è§£

2. **ç­–ç•¥é€‰æ‹©**
   - è®©ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©ç­–ç•¥é€šå¸¸æ•ˆæœæœ€å¥½
   - ç‰¹å®šåœºæ™¯å¯ä»¥æ‰‹åŠ¨æŒ‡å®šç­–ç•¥

3. **æ€§èƒ½ä¼˜åŒ–**
   - é™åˆ¶æ£€ç´¢ç»“æœæ•°é‡ï¼ˆmax_resultsï¼‰
   - å¯¹é•¿æ–‡æ¡£å…ˆè¿›è¡Œåˆ†æå†æé—®

## åç»­å¼€å‘è®¡åˆ’

1. **åŠŸèƒ½å¢å¼º**
   - [ ] æ”¯æŒå¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡
   - [ ] æ·»åŠ è¯­éŸ³è¾“å…¥æ”¯æŒ
   - [ ] å®ç°å¯¹è¯å†å²å¯¼å‡º

2. **å¯è§†åŒ–æ”¹è¿›**
   - [ ] çŸ¥è¯†å›¾è°±å¯è§†åŒ–
   - [ ] è®¤çŸ¥è¿‡ç¨‹åŠ¨ç”»å±•ç¤º
   - [ ] æ³¨æ„åŠ›æƒé‡çƒ­å›¾

3. **æ€§èƒ½ä¼˜åŒ–**
   - [ ] å“åº”æµå¼ä¼ è¾“
   - [ ] å®¢æˆ·ç«¯ç¼“å­˜ç­–ç•¥
   - [ ] é¢„åŠ è½½å¸¸ç”¨æ•°æ®