### **认知增强平台 (Cognitive Enhancement Platform) 项目规划书 (v2.1 \- LangChain/LangGraph 整合版)**

#### **1\. 项目概述 (Executive Summary)**

本项目旨在构建一个超越传统RAG（检索增强生成）问答系统的**认知增强平台**。其核心定位不再是简单的信息“存取”工具，而是深度赋能知识工作者的**分析与创造伙伴**。平台将通过覆盖从文档吸收到知识产品输出的完整生命周期，将用户与AI的交互从“一问一答”提升为“协同共创”。

我们采纳“**分析增强生成 (Analysis Augmenting Generation, AAG)**”为核心方法论，并贯彻“**玻璃箱 (Glass Box)**”协驾原则，通过分阶段、模块化、异步化的工程路径，确保平台的宏伟愿景能够稳健、高效地落地。**我们将深度利用 LangChain 和 LangGraph 框架来加速开发并实现核心的智能流程编排。**

#### **2\. 核心理念 (Core Concepts)**

* **认知增强平台 (Cognitive Enhancement Platform):**  
  * **愿景:** 不仅仅是回答“什么”，更是帮助用户探索“为什么”和“如何”。  
  * **价值:** 释放专家潜力，将耗时的数据处理与初步分析工作自动化。  
* **分析增强生成 (Analysis Augmenting Generation, AAG):**  
  * **定义:** 在生成最终内容前，引入一系列结构化、深度的分析步骤。  
  * **实现:** 通过专业的提示词体系和**由 LangGraph 编排的任务链**来驱动LLM执行复杂分析。  
* **“玻璃箱”协驾原则 (Glass Box Principle):**  
  * **目标:** 实现流程的**可视、可控、可回溯**，建立用户信任。  
  * **体现:** **利用 LangGraph 的原生可中断特性**，让用户清晰地看到AI执行的每一步，并能在关键节点进行干预。

#### **3\. 整体架构 (Overall Architecture)**

1. **规划代理层 (Planner Agent):**  
   * **职责:** 接收用户高阶指令，分解为结构化任务列表（JSON格式）。**此步骤本身可由一个 LangChain 链实现。**  
2. **步进式执行层 (Stepped Execution Engine):**  
   * **职责:** **使用 LangGraph 作为核心编排引擎**，将规划代理生成的任务列表构建成一个有状态的、可执行的图（Graph）。图中的每个节点（Node）对应一个具体的分析任务。  
   * **技术核心:** **LangGraph** 负责管理任务流转、状态更新和**人在环路（Human-in-the-Loop）的暂停/恢复逻辑**。对于需要高可靠性和后台执行的长时间任务，整个LangGraph图的执行可以被封装并交由 **Prefect/Celery** 进行调度。  
3. **实时UI反馈层 (Real-time UI):**  
   * **职责:** 通过SSE/WebSocket，将 **LangGraph 执行过程中的每一步状态变化**实时推送给前端Next.js应用。  
4. **干预与记忆循环层 (Intervention & Memory Loop):**  
   * **职责:** **直接利用 LangGraph 原生的 interrupt 机制实现**。当图执行到需要用户输入的节点时，它会暂停，等待前端返回用户的确认或修改，然后再继续执行。  
5. **物料回写与存储层 (Analysis Artifact Store):**  
   * **职责:** **LangGraph 中的状态对象（State Object）将与此层紧密耦合**。每一步分析产生的物料都会更新状态对象，并被持久化到PostgreSQL和对象存储中。

#### **4\. 发展蓝图 (12个月三步走)**

| 阶段 | 名称 | 时间 | 目标 | 核心里程碑 | 成功指标 |
| :---- | :---- | :---- | :---- | :---- | :---- |
| **MVP** | **智能阅读器 (Smart Reader)** | 0-3月 | 验证核心文档处理与基础分析流程。 | • **使用 LangChain 加速文档加载、分割与索引**\<br\>• 快速浏览(Skim)链 (P95 ≤ 2s)\<br\>• 基础QA检索 (基于Qdrant) | • DAU ≥ 50\<br\>• 点击“深度分析”比例 ≥ 30% |
| **V1** | **分析师工作台 (Analyst Workbench)** | 3-8月 | 部署核心AAG能力和“只读”玻璃箱。 | • **基于 LangGraph 的任务分解与执行**\<br\>• 步进式异步执行 \+ 进度流\<br\>• Analysis Artifact Store V1 | • 深度任务成功率 ≥ 90%\<br\>• （调研）用户满意度 \> 80% |
| **V2** | **知识合成器 (Knowledge Synthesizer)** | 8-12月 | 实现完整的“人在环路”协同。 | • **激活 LangGraph 的交互式干预/记忆Loop**\<br\>• 模板化成果输出\<br\>• 跨文档比较与报告 | • 复用物料比例 ≥ 60%\<br\>• 生成报告的NPS ≥ 40 |

#### **5\. 近期落地建议 (Immediate Action Plan \- 优先级排序)**

1. **定义元数据 Schema (v0.1):**  
   * （无变化）在PostgreSQL中，以 document\_id \+ version 为主键设计表结构。  
2. **搭建任务执行器原型 (Task Runner POC):**  
   * **技术栈:** **使用 LangGraph 搭建核心流程图**。  
   * **目标:** 创建一个包含“摘要生成”和“大纲提取”两个节点的简单图。验证可以接收指令、执行图、并将结果（状态）写回数据库。**此原型将直接演变为V1的核心**。  
3. **设计规划代理提示词 (Planner Agent Prompt):**  
   * （无变化）设计一个能稳定将自然语言指令转换为JSON格式任务序列的Meta-Prompt。  
4. **开发实时UI模块 (只读):**  
   * **技术:** 选用 SSE。  
   * **目标:** 订阅后端 **LangGraph 执行器**发出的事件，实时展示节点的执行状态。  
5. **建立成本监控与预算面板:**  
   * （无变化）使用 Prometheus 进行指标打点。

#### **6\. 关键挑战与风险缓解**

（此部分内容保持不变，因为LangChain/LangGraph是解决“任务编排”挑战的具体方案，而不是引入新的风险。）

#### **7\. 结论**

这份更新后的方案将 **LangChain** 和 **LangGraph** 明确为我们实现“认知增强平台”的核心技术框架。这不仅没有改变我们最初的战略愿景，反而通过引入成熟的工具集，**显著降低了实施复杂性，加快了开发速度**，并使“玻璃箱”和“人在环路”等高级概念的落地变得更加直接和可行。