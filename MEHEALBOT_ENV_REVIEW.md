# MeHealBot .env é…ç½®è¯„å®¡æŠ¥å‘Š

## ğŸ“‹ é…ç½®æ¦‚è§ˆ

æ‚¨çš„ `.env` é…ç½®æ–‡ä»¶æ•´ä½“ç»“æ„è‰¯å¥½ï¼Œæ¶µç›–äº† MeHealBot V3.0 çš„ä¸»è¦ç»„ä»¶ï¼š
- PostgreSQLï¼ˆæŒä¹…è®°å¿†ï¼‰
- Redisï¼ˆå·¥ä½œè®°å¿†ï¼‰  
- Qdrantï¼ˆå‘é‡è®°å¿†ï¼‰
- OpenRouterï¼ˆLLMæœåŠ¡ï¼‰
- JWTè®¤è¯
- é‚®ä»¶æœåŠ¡

## âœ… ä¼˜ç§€é…ç½®

1. **æ¸…æ™°çš„åˆ†ç»„**: ä½¿ç”¨æ³¨é‡Šå°†é…ç½®åˆ†ä¸ºé€»è¾‘ç»„
2. **ç‰ˆæœ¬åŒ–å‘½å**: ä½¿ç”¨ `memory_v31` schema é¿å…å†²çª
3. **åˆç†çš„æ•°å€¼**: è¿æ¥æ± ã€è¿‡æœŸæ—¶é—´ç­‰å‚æ•°è®¾ç½®åˆç†
4. **å®Œæ•´çš„æœåŠ¡**: æ¶µç›–äº†æ‰€æœ‰å¿…éœ€çš„å¤–éƒ¨ä¾èµ–

## âš ï¸ å®‰å…¨é£é™©

### é«˜é£é™©
- **APIå¯†é’¥æš´éœ²**: OpenRouter APIå¯†é’¥ä¸åº”å‡ºç°åœ¨é…ç½®æ–‡ä»¶ä¸­
- **é‚®ç®±å¯†ç æš´éœ²**: Gmailåº”ç”¨å¯†ç ä¸åº”ç›´æ¥å†™å…¥
- **æ•°æ®åº“å¯†ç æ˜æ–‡**: PostgreSQLå’ŒRediså¯†ç æ˜æ–‡å­˜å‚¨

### å»ºè®®æªæ–½
1. **åˆ›å»º .env.example æ¨¡æ¿**
2. **å°† .env åŠ å…¥ .gitignore**
3. **ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡**

## ğŸ”§ å…·ä½“ä¿®å¤

### 1. Redis URL æ ¼å¼é”™è¯¯
```bash
# å½“å‰ï¼ˆé”™è¯¯ï¼‰
REDIS_URL=redis://[:password@]host:port/db

# åº”è¯¥ä¿®æ”¹ä¸º
REDIS_URL=redis://:123qwe@rtx4080:6379/3
```

### 2. åˆ é™¤æœ«å°¾åæ–œæ 
```bash
# å½“å‰
FALLBACK_TO_MEMORY=false\

# åº”è¯¥ä¿®æ”¹ä¸º  
FALLBACK_TO_MEMORY=false
```

### 3. æ¸…ç†æœªä½¿ç”¨çš„é…ç½®
```bash
# å¦‚æœä¸éœ€è¦ Qdrant è®¤è¯ï¼Œåˆ é™¤æˆ–æ³¨é‡Š
# QDRANT_API_KEY=
```

## ğŸš€ æ”¹è¿›å»ºè®®

### ç«‹å³æ‰§è¡Œ
1. **åˆ›å»ºå®‰å…¨çš„é…ç½®æ¨¡æ¿**
   ```bash
   cp .env .env.backup
   # ä½¿ç”¨æä¾›çš„ .env.example æ¨¡æ¿
   ```

2. **æ›´æ–° .gitignore**
   ```bash
   echo ".env" >> .gitignore
   echo ".env.local" >> .gitignore
   ```

3. **ä¿®å¤æ ¼å¼é—®é¢˜**
   ```bash
   # ä¿®å¤ Redis URL
   # åˆ é™¤æœ«å°¾åæ–œæ 
   ```

### ä¸­æœŸä¼˜åŒ–
1. **ä½¿ç”¨ç¯å¢ƒå˜é‡æ³¨å…¥**
   ```bash
   export OPENROUTER_API_KEY="your-key"
   export SMTP_PASSWORD="your-password"
   ```

2. **å®ç°é…ç½®éªŒè¯**
   ```python
   def validate_config():
       required_vars = [
           'DATABASE_URL', 'SECRET_KEY', 
           'OPENROUTER_API_KEY', 'REDIS_URL'
       ]
       missing = [var for var in required_vars if not os.getenv(var)]
       if missing:
           raise ValueError(f"Missing required config: {missing}")
   ```

3. **æ·»åŠ é…ç½®æ£€æŸ¥è„šæœ¬**
   ```python
   # config_check.py
   import os
   from urllib.parse import urlparse
   
   def check_database_url():
       url = os.getenv('DATABASE_URL')
       parsed = urlparse(url)
       return parsed.scheme == 'postgresql'
   
   def check_redis_url():
       url = os.getenv('REDIS_URL')
       parsed = urlparse(url)
       return parsed.scheme == 'redis'
   ```

## ğŸ“Š é…ç½®è´¨é‡è¯„åˆ†

| ç±»åˆ« | å¾—åˆ† | è¯´æ˜ |
|------|------|------|
| å®Œæ•´æ€§ | 9/10 | åŒ…å«æ‰€æœ‰å¿…éœ€é…ç½® |
| å®‰å…¨æ€§ | 4/10 | æ•æ„Ÿä¿¡æ¯æš´éœ²ä¸¥é‡ |
| å¯ç»´æŠ¤æ€§ | 8/10 | ç»“æ„æ¸…æ™°ï¼Œæ³¨é‡Šå®Œå–„ |
| æ­£ç¡®æ€§ | 7/10 | æœ‰æ ¼å¼é”™è¯¯éœ€ä¿®å¤ |
| **æ€»åˆ†** | **7/10** | **éœ€è¦å®‰å…¨æ€§æ”¹è¿›** |

## âœ… éªŒè¯æ¸…å•

å®Œæˆä»¥ä¸‹æ£€æŸ¥åï¼Œé…ç½®è´¨é‡å°†æ˜¾è‘—æå‡ï¼š

- [ ] åˆ›å»º .env.example æ¨¡æ¿æ–‡ä»¶
- [ ] å°† .env æ·»åŠ åˆ° .gitignore
- [ ] ä¿®å¤ REDIS_URL æ ¼å¼
- [ ] åˆ é™¤æœ«å°¾åæ–œæ 
- [ ] ç§»é™¤æ˜æ–‡æ•æ„Ÿä¿¡æ¯
- [ ] æµ‹è¯•æ‰€æœ‰æœåŠ¡è¿æ¥
- [ ] å®ç°é…ç½®éªŒè¯é€»è¾‘
- [ ] å»ºç«‹å¯†é’¥è½®æ¢æœºåˆ¶

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³**: ä¿®å¤æ ¼å¼é”™è¯¯ï¼Œåˆ›å»ºå®‰å…¨æ¨¡æ¿
2. **ä»Šå¤©**: å®ç°é…ç½®éªŒè¯å’Œè¿æ¥æµ‹è¯•
3. **æœ¬å‘¨**: å»ºç«‹å¯†é’¥ç®¡ç†æµç¨‹
4. **æŒç»­**: å®šæœŸå®¡æŸ¥å’Œæ›´æ–°é…ç½®

---

**è¯„å®¡çŠ¶æ€**: éœ€è¦å®‰å…¨æ€§æ”¹è¿›  
**ä¼˜å…ˆçº§**: é«˜ï¼ˆåŒ…å«æ•æ„Ÿä¿¡æ¯æš´éœ²ï¼‰  
**å»ºè®®æ—¶é—´**: ç«‹å³å¤„ç†å®‰å…¨é—®é¢˜