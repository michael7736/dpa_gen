# ðŸš€ DPA V2æ–‡æ¡£å¤„ç†ç³»ç»Ÿæ¼”ç¤ºæŒ‡å—

## ðŸŽ¯ ç³»ç»Ÿæ¦‚è¿°

DPA V2æ–‡æ¡£å¤„ç†ç³»ç»Ÿæ˜¯æ–°ä¸€ä»£æ™ºèƒ½æ–‡æ¡£å¤„ç†å¹³å°ï¼Œæä¾›äº†å®Œå…¨ç”¨æˆ·å¯æŽ§çš„æ–‡æ¡£å¤„ç†æµç¨‹ï¼š

### âœ¨ æ ¸å¿ƒç‰¹æ€§
- **çµæ´»çš„å¤„ç†é€‰é¡¹**ï¼šç”¨æˆ·å¯ä»¥é€‰æ‹©ä»…ä¸Šä¼ ã€æ‘˜è¦ã€ç´¢å¼•ã€æ·±åº¦åˆ†æžçš„ä»»æ„ç»„åˆ
- **å®žæ—¶è¿›åº¦è·Ÿè¸ª**ï¼šæ˜¾ç¤ºæ¯ä¸ªå¤„ç†é˜¶æ®µçš„è¯¦ç»†è¿›åº¦å’Œè€—æ—¶
- **MinIOå¯¹è±¡å­˜å‚¨**ï¼šä¼ä¸šçº§æ–‡ä»¶å­˜å‚¨ï¼Œæ”¯æŒå¤§æ–‡ä»¶å’Œé«˜å¹¶å‘
- **ä¸­æ–­æ¢å¤æœºåˆ¶**ï¼šæ”¯æŒéšæ—¶ä¸­æ–­å’Œæ¢å¤å¤„ç†æµç¨‹
- **é«˜æ€§èƒ½å¤„ç†**ï¼šä¼˜åŒ–çš„ç®—æ³•å’Œå¹¶å‘æž¶æž„

## ðŸŒ ç³»ç»Ÿè®¿é—®

### å‰ç«¯ç•Œé¢
- **ä¸»é¡µ**: http://localhost:8230
- **V2æ–‡æ¡£å¤„ç†**: http://localhost:8230/documents-v2
- **ä¼ ç»Ÿæ–‡æ¡£ç®¡ç†**: http://localhost:8230/documents
- **é¡¹ç›®ç®¡ç†**: http://localhost:8230/projects

### APIæŽ¥å£
- **å¥åº·æ£€æŸ¥**: http://localhost:8200/health
- **APIæ–‡æ¡£**: http://localhost:8200/docs
- **V2ä¸Šä¼ æŽ¥å£**: http://localhost:8200/api/v2/documents/upload

## ðŸ§ª æ¼”ç¤ºæ­¥éª¤

### æ­¥éª¤1ï¼šè®¿é—®V2æ–‡æ¡£å¤„ç†é¡µé¢
```bash
# åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
open http://localhost:8230/documents-v2
```

### æ­¥éª¤2ï¼šä½“éªŒä¸åŒå¤„ç†é€‰é¡¹

#### 2.1 ä»…ä¸Šä¼ æ¨¡å¼
- é€‰æ‹©æ–‡æ¡£æ–‡ä»¶
- å‹¾é€‰"ä»…ä¸Šä¼ "
- ç‚¹å‡»"å¼€å§‹ä¸Šä¼ "
- ç»“æžœï¼šæ–‡æ¡£ä¿å­˜åˆ°MinIOï¼Œæ— å…¶ä»–å¤„ç†

#### 2.2 å¿«é€Ÿæ‘˜è¦æ¨¡å¼
- é€‰æ‹©æ–‡æ¡£æ–‡ä»¶
- å‹¾é€‰"ç”Ÿæˆæ‘˜è¦"
- ç‚¹å‡»"å¼€å§‹ä¸Šä¼ "
- è§‚å¯Ÿï¼šå®žæ—¶è¿›åº¦æ¡æ˜¾ç¤ºæ‘˜è¦ç”Ÿæˆè¿‡ç¨‹ï¼ˆçº¦5-10ç§’ï¼‰

#### 2.3 å®Œæ•´ç´¢å¼•æ¨¡å¼
- é€‰æ‹©æ–‡æ¡£æ–‡ä»¶
- å‹¾é€‰"ç”Ÿæˆæ‘˜è¦" + "åˆ›å»ºç´¢å¼•"
- ç‚¹å‡»"å¼€å§‹ä¸Šä¼ "
- è§‚å¯Ÿï¼šä¸¤é˜¶æ®µå¤„ç†ï¼Œå…ˆæ‘˜è¦åŽç´¢å¼•

#### 2.4 æ·±åº¦åˆ†æžæ¨¡å¼
- é€‰æ‹©æ–‡æ¡£æ–‡ä»¶
- å‹¾é€‰æ‰€æœ‰é€‰é¡¹
- ç‚¹å‡»"å¼€å§‹ä¸Šä¼ "
- è§‚å¯Ÿï¼šå››é˜¶æ®µå®Œæ•´å¤„ç†æµç¨‹

### æ­¥éª¤3ï¼šè¿›åº¦è·Ÿè¸ªä½“éªŒ
- ä¸Šä¼ è¾ƒå¤§æ–‡æ¡£ï¼ˆæŽ¨è1-5MBçš„PDFï¼‰
- è§‚å¯Ÿå®žæ—¶è¿›åº¦æ›´æ–°
- æŸ¥çœ‹æ¯ä¸ªé˜¶æ®µçš„çŠ¶æ€å˜åŒ–
- æ³¨æ„è€—æ—¶ç»Ÿè®¡å’ŒçŠ¶æ€ä¿¡æ¯

### æ­¥éª¤4ï¼šAPIç›´æŽ¥æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
```bash
# åˆ›å»ºæµ‹è¯•æ–‡æ¡£
cat > demo_test.md << 'EOF'
# APIæµ‹è¯•æ–‡æ¡£
è¿™æ˜¯ç”¨äºŽæµ‹è¯•APIçš„ç¤ºä¾‹æ–‡æ¡£ã€‚
åŒ…å«ä¸€äº›åŸºæœ¬å†…å®¹ç”¨äºŽéªŒè¯å¤„ç†åŠŸèƒ½ã€‚
EOF

# æµ‹è¯•V2ä¸Šä¼ API
curl -X POST http://localhost:8200/api/v2/documents/upload \
  -H "X-USER-ID: 243588ff-459d-45b8-b77b-09aec3946a64" \
  -F "file=@demo_test.md;type=text/markdown" \
  -F "upload_only=false" \
  -F "generate_summary=true" \
  -F "create_index=false" \
  -F "deep_analysis=false"
```

## ðŸ“Š æ€§èƒ½åŸºå‡†

åŸºäºŽæµ‹è¯•ç»“æžœï¼Œä»¥ä¸‹æ˜¯å„å¤„ç†é˜¶æ®µçš„æ€§èƒ½è¡¨çŽ°ï¼š

| å¤„ç†é˜¶æ®µ | å°æ–‡æ¡£(< 1KB) | ä¸­ç­‰æ–‡æ¡£(1-5KB) | å¤§æ–‡æ¡£(> 5KB) |
|---------|---------------|----------------|--------------|
| æ–‡ä»¶ä¸Šä¼  | < 0.1ç§’ | < 0.1ç§’ | < 0.5ç§’ |
| æ‘˜è¦ç”Ÿæˆ | 4-6ç§’ | 5-8ç§’ | 8-12ç§’ |
| ç´¢å¼•åˆ›å»º | 2-3ç§’ | 3-5ç§’ | 5-8ç§’ |
| æ·±åº¦åˆ†æž | 0.5-1ç§’ | 0.8-1.5ç§’ | 1-2ç§’ |

## ðŸ› ï¸ æŠ€æœ¯æž¶æž„

### åŽç«¯æž¶æž„
```
FastAPI (8200) 
â”œâ”€â”€ V2 API (/api/v2/documents/*)
â”œâ”€â”€ å¤„ç†ç®¡é“ç³»ç»Ÿ
â”œâ”€â”€ MinIOå¯¹è±¡å­˜å‚¨
â”œâ”€â”€ PostgreSQLæ•°æ®åº“
â”œâ”€â”€ Qdrantå‘é‡æ•°æ®åº“
â””â”€â”€ åŽå°ä»»åŠ¡é˜Ÿåˆ—
```

### å‰ç«¯æž¶æž„
```
Next.js (8230)
â”œâ”€â”€ React 19
â”œâ”€â”€ TypeScript
â”œâ”€â”€ Tailwind CSS
â”œâ”€â”€ ZustandçŠ¶æ€ç®¡ç†
â””â”€â”€ Axios HTTPå®¢æˆ·ç«¯
```

### æ•°æ®å­˜å‚¨
```
MinIOå¯¹è±¡å­˜å‚¨
â”œâ”€â”€ åŽŸå§‹æ–‡æ¡£æ–‡ä»¶
â”œâ”€â”€ å¤„ç†ç»“æžœæ–‡ä»¶
â””â”€â”€ åˆ†æžæŠ¥å‘Šæ–‡ä»¶

PostgreSQL
â”œâ”€â”€ æ–‡æ¡£å…ƒæ•°æ®
â”œâ”€â”€ å¤„ç†ç®¡é“çŠ¶æ€
â”œâ”€â”€ ç”¨æˆ·å’Œé¡¹ç›®ä¿¡æ¯
â””â”€â”€ å¤„ç†åŽ†å²è®°å½•

Qdrantå‘é‡æ•°æ®åº“
â”œâ”€â”€ æ–‡æ¡£å‘é‡è¡¨ç¤º
â”œâ”€â”€ è¯­ä¹‰æœç´¢ç´¢å¼•
â””â”€â”€ ç›¸ä¼¼åº¦è®¡ç®—
```

## ðŸ” æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜

1. **å‰ç«¯æ— æ³•è®¿é—®**
   ```bash
   # æ£€æŸ¥å‰ç«¯æœåŠ¡
   cd frontend && npm run dev
   ```

2. **APIè¿žæŽ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥APIæœåŠ¡
   uvicorn src.api.main:app --host 0.0.0.0 --port 8200 --reload
   ```

3. **æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
   - æ£€æŸ¥æ–‡ä»¶æ ¼å¼ï¼ˆæ”¯æŒï¼šPDF, DOCX, DOC, TXT, MDï¼‰
   - æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆå»ºè®® < 100MBï¼‰
   - æ£€æŸ¥MinIOè¿žæŽ¥çŠ¶æ€

4. **å¤„ç†ç®¡é“å¡ä½**
   - æŸ¥çœ‹APIæ—¥å¿—
   - æ£€æŸ¥æ•°æ®åº“è¿žæŽ¥
   - éªŒè¯AIæœåŠ¡ï¼ˆOpenAI APIï¼‰

### æ—¥å¿—æŸ¥çœ‹
```bash
# APIæ—¥å¿—
tail -f data/logs/app.log

# å‰ç«¯æ—¥å¿—
# æŸ¥çœ‹æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŽ§åˆ¶å°
```

## ðŸŽ‰ æ¼”ç¤ºäº®ç‚¹

### ç”¨æˆ·ä½“éªŒæ”¹è¿›
1. **é€‰æ‹©æ€§å¤„ç†**ï¼šé¿å…ä¸å¿…è¦çš„èµ„æºæ¶ˆè€—
2. **å®žæ—¶åé¦ˆ**ï¼šç”¨æˆ·å§‹ç»ˆäº†è§£å¤„ç†çŠ¶æ€
3. **çµæ´»æŽ§åˆ¶**ï¼šå¯éšæ—¶ä¸­æ–­å’Œæ¢å¤
4. **ç›´è§‚ç•Œé¢**ï¼šæ¸…æ™°çš„è¿›åº¦æ˜¾ç¤ºå’ŒçŠ¶æ€æç¤º

### æŠ€æœ¯åˆ›æ–°
1. **å¤„ç†ç®¡é“æž¶æž„**ï¼šæ¨¡å—åŒ–ã€å¯æ‰©å±•çš„å¤„ç†æµç¨‹
2. **MinIOé›†æˆ**ï¼šä¼ä¸šçº§å¯¹è±¡å­˜å‚¨è§£å†³æ–¹æ¡ˆ
3. **å¼‚æ­¥å¤„ç†**ï¼šåŽå°ä»»åŠ¡ä¸é˜»å¡žç”¨æˆ·ç•Œé¢
4. **ä¸´æ—¶æ–‡ä»¶ç®¡ç†**ï¼šè‡ªåŠ¨æ¸…ç†ï¼Œé¿å…ç£ç›˜ç©ºé—´æ³„æ¼

### ç³»ç»Ÿç¨³å®šæ€§
1. **é”™è¯¯æ¢å¤**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
2. **æ•°æ®ä¸€è‡´æ€§**ï¼šäº‹åŠ¡æ€§æ“ä½œä¿è¯æ•°æ®å®Œæ•´
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šç¼“å­˜ã€è¿žæŽ¥æ± ã€æ‰¹å¤„ç†ç­‰ä¼˜åŒ–
4. **ç›‘æŽ§èƒ½åŠ›**ï¼šè¯¦ç»†çš„æ—¥å¿—å’ŒçŠ¶æ€è·Ÿè¸ª

## ðŸ“ ä¸‹ä¸€æ­¥å¼€å‘

1. **WebSocketå®žæ—¶æŽ¨é€**ï¼šæ›¿ä»£è½®è¯¢æœºåˆ¶
2. **æ‰¹é‡æ–‡æ¡£å¤„ç†**ï¼šæ”¯æŒå¤šæ–‡æ¡£åŒæ—¶ä¸Šä¼ 
3. **è‡ªå®šä¹‰å¤„ç†é…ç½®**ï¼šç”¨æˆ·å¯è°ƒæ•´å¤„ç†å‚æ•°
4. **å¤„ç†ç»“æžœå¯è§†åŒ–**ï¼šå›¾è¡¨å±•ç¤ºåˆ†æžç»“æžœ
5. **ç§»åŠ¨ç«¯é€‚é…**ï¼šå“åº”å¼è®¾è®¡ä¼˜åŒ–

---

ðŸŽ¯ **æ¼”ç¤ºå®ŒæˆåŽï¼Œç”¨æˆ·å°†å……åˆ†äº†è§£DPA V2ç³»ç»Ÿçš„å¼ºå¤§åŠŸèƒ½å’Œçµæ´»æ€§ï¼Œä½“éªŒåˆ°çŽ°ä»£åŒ–çš„æ–‡æ¡£å¤„ç†æµç¨‹ã€‚**